
<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Ingresar datos del cliente</h5>
            </div>
            <div class="card-body">
                <form [formGroup]="validationform" (submit)="crearCliente()" class="needs-validation" novalidate>
                    
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="identidad-input"  class="form-label">Identidad<span class="text-danger">*</span></label>
                                <input id="identidad" type="text" formControlName="clie_Identidad" class="form-control" [ngClass]="{'is-invalid': submit && form['clie_Identidad'].errors}" required>
                                <div class="invalid-feedback">
                                    Este campo es requerido.
                                </div>
                            </div>
                        </div><!--end col-->
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="nombres-input"  class="form-label">Nombres<span class="text-danger">*</span></label>
                                <input id="nombres" type="text" formControlName="clie_Nombres" class="form-control" [ngClass]="{'is-invalid': submit && form['clie_Nombres'].errors}" required>
                                <div class="invalid-feedback">
                                    Este campo es requerido.
                                </div>
                            </div>
                        </div><!--end col-->
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="apellidos-input"  class="form-label">Apellidos<span class="text-danger">*</span></label>
                                <input id="apellidos" type="text" formControlName="clie_Apellidos" class="form-control" [ngClass]="{'is-invalid': submit && form['clie_Apellidos'].errors}" required>
                                <div class="invalid-feedback">
                                    Este campo es requerido.
                                </div>
                            </div>
                        </div><!--end col-->
                        
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="bathroom-input" class="form-label">Fecha de Nacimiento<span class="text-danger">*</span></label>
                                <input id="fechaNacimiento" type="date" formControlName="clie_FechaNacimiento" class="form-control" [ngClass]="{'is-invalid': submit && form['clie_FechaNacimiento'].errors}" required>
                                <div class="invalid-feedback">
                                    Este campo es requerido.
                                </div>
                            </div>
                        </div><!--end col-->
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="bathroom-input" class="form-label">Sexo<span class="text-danger">*</span></label>
                                <input id="sexo" type="text" formControlName="clie_Sexo" class="form-control" [ngClass]="{'is-invalid': submit && form['clie_Sexo'].errors}" required>
                                <div class="invalid-feedback">
                                    Este campo es requerido.
                                </div>
                            </div>
                        </div><!--end col-->
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="state-input" class="form-label">Estado Civil<span class="text-danger">*</span></label>
                                <!-- <input id="estadoCivil" type="number" formControlName="esCi_Id" class="form-control" [ngClass]="{'is-invalid': submit && form['esCi_Id'].errors}" required> -->
                                <ng-select  bindLabel="esCi_Nombre" [items]="estadosCiviles" 
                                bindLabel="esCi_Nombre" 
                                bindValue="esCi_Id"
                                placeholder="Seleccione un estado civil"
                                formControlName="esCi_Id">
                                </ng-select>
                                <div class="invalid-feedback">
                                    Este campo es requerido.
                                </div>
                            </div>
                        </div><!--end col-->
                        <div class="col-lg-12">
                            <div class="mb-3">
                                <label for="street-address" class="form-label">Dirección<span class="text-danger">*</span></label>
                                <input id="direccion" type="text" formControlName="clie_Direccion" class="form-control" [ngClass]="{'is-invalid': submit && form['clie_Direccion'].errors}" required>
                                <div class="invalid-feedback">
                                    Este campo es requerido.
                                </div>
                            </div>
                        </div><!--end col-->
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="country-input" class="form-label">Teléfono <span class="text-danger">*</span></label>
                                <input id="telefono" type="text" formControlName="clie_Telefono" class="form-control" [ngClass]="{'is-invalid': submit && form['clie_Telefono'].errors}" required>
                                <div class="invalid-feedback">
                                    Este campo es requerido.
                                </div>
                            </div>
                        </div><!--end col-->
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="zipcode-input" class="form-label">Municipio<span class="text-danger">*</span></label>
                                <ng-select  bindLabel="muni_Nombre" [items]="municipios" 
                                bindLabel="muni_Nombre" 
                                bindValue="muni_Codigo"
                                placeholder="Seleccione un municipio"
                                formControlName="muni_Codigo"
                                [ngClass]="{'is-invalid': submit && form['muni_Codigo'].errors}">
                                </ng-select>
                                <div class="invalid-feedback">
                                    Este campo es requerido.
                                </div>
                            </div>
                        </div><!--end col-->
                        
                        <div class="mb-3">
                            <label class="form-label">Imagen del empleado<span class="text-danger">*</span></label>
                            <dropzone class="dropzone" [config]="dropzoneConfig" [message]="'Haz clic o arrastra un archivo para subirlo.'" (success)="onUploadSuccess($event)"></dropzone>
                            @if (uploadedFiles) {
                            <ul class="list-unstyled mb-0" id="dropzone-preview">
                                @for (file of uploadedFiles; track $index) {
                                <li class="mt-2" id="dropzone-preview-list">
                                    <div class="border rounded">
                                        <div class="d-flex flex-wrap gap-2 p-2">
                                            <div class="flex-shrink-0 me-3">
                                                <div class="avatar-sm bg-light rounded p-2">
                                                    @if (file.dataURL) {
                                                    <img class="img-fluid rounded d-block" [src]="file.dataURL" alt="Dropzone-Image" />
                                                    }@else {
                                                    <img class="img-fluid rounded d-block" [src]="file" alt="Dropzone-Image" />
                                                    }
                                                </div>
                                            </div>
                                            <div class="flex-grow-1">
                                                <div class="pt-1">
                                                    @if (file.name) {<h5 class="fs-md mb-1">{{ file.name }}</h5>}
                                                    @if (file.size) {<p class="fs-sm text-muted mb-0">{{ file.size }}</p>}
                                                </div>
                                            </div>
                                            <div class="flex-shrink-0 ms-3">
                                                <button (click)="removeFile(file)" class="btn btn-sm btn-danger">Delete</button>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            }
                            </ul>
                            }
                        </div>

                        <div class="col-lg-12">
                            <div class="hstack gap-2 justify-content-end">
                                <button type="button"  (click)="cancelarFormulario()" class="btn btn-secondary"><i class="bi bi-repeat align-baseline me-1"></i> Cancelar</button>
                                <button type="submit" class="btn btn-primary"><i class="bi bi-clipboard2-check align-baseline me-1"></i> Insertar</button>
                            </div>
                        </div>
                    </div><!--end row-->
                </form>
            </div>
        </div><!--end card-->
    </div><!--end col-->
</div><!--end row-->